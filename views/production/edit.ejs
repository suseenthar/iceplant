 
        <!-- Page Header -->
        <div class="d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb">
            <h1 class="page-title fw-semibold fs-18 mb-0">Productions </h1>
            <div class="ms-md-1 ms-0">
                <nav>
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item"><a href="javascript:void(0);">Productions</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Create</li>
                    </ol>
                </nav>
            </div>
        </div>
        <!-- Page Header Close -->
        <form method="post" id="newproduction">
        <!-- Start::row-1 -->
        <div class="row">
            <div class="col-xxl-12 col-xl-12">

                <div class="card custom-card"> 
                    <div class="card-body">
                        
                        <div class="row gy-2"><div class="col-xl-6"></div>
                            
                            <div class="col-xl-3">
                                <label class="form-label">Select Date</label>
                                <div class="input-group">
                                <div class="input-group-text text-muted"> <i class="ri-calendar-line"></i> </div>
                                <input type="text" class="form-control flatpickr-input active" id="startdate" name="date" value="<%= moment(prodata.date).format('YYYY-MM-DD')  %>" required placeholder="Choose date" readonly="readonly">
                            </div>
                            </div> 
                            
                            <div class="col-xl-3">
                                <label for="Units-id" class="form-label">Total Bars</label>
                                <input type="number" class="form-control" name="bars" placeholder="Total Bars" value="<%=prodata.bars%>" required readonly id="totalTot">
                            </div>
                        
                            
                             
                        </div>
                  
                    </div>
                     
                </div>
 
            </div>
            <% unitlist.forEach(data => { %> 
            <div class="col-xxl-6 col-xl-6">
                <div class="card custom-card">
                    <div class="card-header justify-content-between">
                        <div class="card-title">
                            <%=data.name %> -  Ice Bar Details
                        </div>
                        <div class="d-flex">
                            <button type="submit" class="btn btn-primary">Save</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="datatable-basic" class="table table-bordered text-nowrap w-100">
                                <thead>
                                    <tr>
                                        <th scope="col" class="text-center">Row No</th>
                                        <th scope="col" class="text-center" >Time</th>
                                        <th scope="col" class="text-center">AM/PM</th>                                        
                                        <th scope="col" class="text-center">Quantity</th>   
                                        <th scope="col" class="text-center">TOT BAR</th>          
                                    </tr>
                                    <% for (let i = 1; i <= 29; i++) { %>
                                        <tr>
                                            <td><b><%= i %></b></td>
                                            <td><input type="time" name="time[<%=data.id %>]" class="form-control"></td>
                                            <td><select style="width: 80px;"  name="ampm[<%=data.id %>]"   class="form-control form-select"><option>AM</option><option>PM</option></select></td>
                                            <td style="text-align: center;"><input type="checkbox" name="qty[<%=data.id %>]"  onclick="updateTotal(this)" class="qty-value"></td>
                                            <td><input type="text" name="tot[<%=data.id %>]" class="form-control tot-value" value="<%=prodata.data.tot[672f28e8a4b8cfff5cf22762]%>"></td>
                                        </tr>
                                      <% } %>
                                    
                                </thead>
                                <tbody> 
                                     
                                </tbody>
                            </table>
 
                        </div>
                    </div>
                     
                </div>
            </div>
            
            <% }); %>  
 
        </div>
        <!--End::row-1 -->
    </form>

        <script>
            function calculateTotal() {
              let totalQty = 0;
              let totalTot = 0;  
               $('.tot-value').each(function() {
                const totValue = parseFloat($(this).val()) || 0;  
                totalTot += totValue;
              });
           
              $('#totalTot').val(totalTot);
            }
          
             $(document).on('input', '.qty-value, .tot-value', calculateTotal);
          </script>

<script> 
    function updateTotal(checkbox) { 
        const totInput = checkbox.closest('tr').querySelector('.tot-value'); 
        const currentValue = parseFloat(totInput.value) || 0; 
        totInput.value = checkbox.checked ? currentValue + 18 : currentValue - 18;
    }
</script>

        <% script = ' <script src="/assets/js/production.js"></script> ' %>
        